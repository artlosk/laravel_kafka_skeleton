# Конфигурация воркеров очереди Kafka для supervisord
# Этот файл автоматически активируется/деактивируется через переменную QUEUE_WORKER_ENABLED
# Для включения: установите QUEUE_WORKER_ENABLED=true в .env и docker-compose.yml
# Для выключения: уберите переменную или установите QUEUE_WORKER_ENABLED=false

[program:laravel-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/html/artisan queue:work kafka --sleep=3 --tries=3 --timeout=60 --max-jobs=1000
autostart=true
autorestart=true
user=sail
numprocs=4
redirect_stderr=true
stdout_logfile=/var/www/html/storage/logs/worker.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stopwaitsecs=3600
stopasgroup=true
killasgroup=true

